---
language: python
python:
  - "3.6"
sudo: required
before_install:
  - sudo apt-get update
  - sudo apt-get install make hunspell hunspell-en-us
# Travis CI instances are unreliable. The misspelled words are different on every CI run.
#  - bad_words=$(hunspell -l -d en_US -p ./hunspell_dictionary_root_pages.txt src/*/*.rst); if [[ "${bad_words}" != "" ]]; then echo -e "${bad_words}\nSpelling errors found."; exit 1; fi
install:
  - pip install Sphinx sphinx-rtd-theme
script:
  - make html
after_success:
  - rm -rf ./src ./roles Makefile ./*.md
  - mv ./build/html/* ./
  - rm -rf ./build
  - touch .nojekyll
deploy:
  provider: pages
  skip-cleanup: true
  github-token: $SUPERSECRET
  keep-history: false
  on:
    tags: true
